(function(g,b){"object"===typeof exports?b(exports):"function"===typeof define&&define.amd?define(["exports"],b):b(g)})(this,function(g){function b(a){this._targetElement=a;this._options={wideAreaAttr:"data-widearea",exitOnEsc:!0,defaultColorScheme:"light",closeIconLabel:"Close WideArea",changeThemeIconLabel:"Toggle Color Scheme",fullScreenIconLabel:"WideArea Mode"};var f=this;a=this._targetElement.querySelectorAll("textarea["+this._options.wideAreaAttr+"='enable']");for(var c=function(){n.call(f,
this)},e=a.length-1;0<=e;e--){var d=a[e],h=document.createElement("div"),k=document.createElement("div"),b=document.createElement("a");h.className="widearea-wrapper";k.className="widearea-icons";b.className="widearea-icon fullscreen";b.title=this._options.fullScreenIconLabel;h.style.width=parseInt(j(d,"width"))+"px";h.style.height=j(d,"height");d.style.width=j(d,"width");d.style.height=j(d,"height");b.href="javascript:void(0);";b.onclick=c;var g=d.cloneNode();g.value=d.value;h.appendChild(g);k.appendChild(b);
h.appendChild(k);d.parentNode.replaceChild(h,d)}}function j(a,f){var c="";a.currentStyle?c=a.currentStyle[f]:document.defaultView&&document.defaultView.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(f));return c.toLowerCase?c.toLowerCase():c}function n(a){var f=this;a=a.parentNode.parentNode.querySelector("textarea");var c=a.cloneNode();c.className=("widearea-fullscreen "+a.className).replace(/^\s+|\s+$/g,"");a.className=("widearea-fullscreened "+a.className).replace(/^\s+|\s+$/g,
"");var e=document.createElement("div");e.className="widearea-controlPanel";var d=document.createElement("a");d.href="javascript:void(0);";d.className="widearea-icon close";d.title=this._options.closeIconLabel;d.onclick=function(){m.call(f)};var b=document.createElement("a");b.href="javascript:void(0);";b.className="widearea-icon changeTheme";b.title=this._options.changeThemeIconLabel;b.onclick=function(){p.call(f)};e.appendChild(d);e.appendChild(b);d=document.createElement("div");d.className="widearea-overlayLayer "+
this._options.defaultColorScheme;d.appendChild(c);d.appendChild(e);document.body.appendChild(d);c.focus();c.value=a.value;this._onKeyDown=function(a){27===a.keyCode&&f._options.exitOnEsc&&m.call(f);9==a.keyCode&&(a.preventDefault(),a=c.selectionStart,c.value=c.value.substring(0,a)+"\t"+c.value.substring(c.selectionEnd),c.selectionEnd=a+1)};window.addEventListener?window.addEventListener("keydown",f._onKeyDown,!0):document.attachEvent&&document.attachEvent("onkeydown",f._onKeyDown)}function p(){var a=
document.querySelector(".widearea-overlayLayer");a.className=/dark/gi.test(a.className)?a.className.replace("dark","light"):a.className.replace("light","dark")}function m(){var a=document.querySelector("textarea.widearea-fullscreened"),b=document.querySelector(".widearea-overlayLayer"),c=b.querySelector("textarea");a.focus();a.value=c.value;a.className=a.className.replace(/widearea-fullscreened/gi,"");b.parentNode.removeChild(b);window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,
!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown)}var l=function(a){if("string"===typeof a){if(a=document.querySelector(a))return new b(a);throw Error("There is no element with given selector.");}return new b(document.body)};l.version="0.1.3";l.fn=b.prototype={clone:function(){return new b(this)},setOption:function(a,b){this._options[a]=b;return this},setOptions:function(a){var b=this._options,c={},e;for(e in b)c[e]=b[e];for(e in a)c[e]=a[e];this._options=c;return this}};
return g.wideArea=l});
